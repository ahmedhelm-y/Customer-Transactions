{"ast":null,"code":"import axios from'axios';import{useEffect,useRef,useState}from'react';import TransactionChart from'../TransactionChart/TransactionChart';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Home(){const chartComponentRef=useRef(null);const[showChart,setShowChart]=useState(false);const[customers,setCustomers]=useState([]);const[transactions,setTransactions]=useState([]);const[filteredCustomers,setFilteredCustomers]=useState([]);const[filterByAmount,setFilterByAmount]=useState([]);const[selectedCustomer,setSelectedCustomer]=useState(null);const[beforeDataComming,setBeforeDataComming]=useState(false);// Function to get all customers\nasync function getCustomers(){let{data}=await axios.get('https://6693fde9c6be000fa07dd61e.mockapi.io/api/v1/customers').catch(error=>console.log('Error fetching Customers data:',error));setCustomers(data);setFilteredCustomers(data);setBeforeDataComming(true);}//to get all customers transactions\nasync function getTransactions(){let{data}=await axios.get('https://6693fde9c6be000fa07dd61e.mockapi.io/api/v1/transactions').catch(error=>console.log('Error fetching Transactions data:',error));setTransactions(data);setFilterByAmount(data);setBeforeDataComming(true);}function searchForName(value){setFilteredCustomers(customers.filter(customer=>customer.name.toLowerCase().includes(value.toLowerCase())));if(!value){setFilteredCustomers(customers);}if(customers.filter(customer=>customer.name.toLowerCase().includes(value.toLowerCase())).length===0){setFilteredCustomers([]);}}function searchForAmount(value){setFilterByAmount(transactions.filter(transaction=>transaction.amount.toString().includes(value)));if(!value){setFilterByAmount(transactions);}if(transactions.filter(transaction=>transaction.amount.toString().includes(value)).length===0){setFilterByAmount([]);}}//to get amount's chart component\nfunction handleCustomerClick(customer){setSelectedCustomer(customer);setShowChart(true);}useEffect(()=>{getCustomers();getTransactions();},[]);useEffect(()=>{//to handle scrolling top to the chart component\nif(showChart&&chartComponentRef.current){chartComponentRef.current.scrollIntoView({behavior:'smooth'});setShowChart(false);}},[showChart]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"mainComponent\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-secondary\",children:\"Customers Transactions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center gap-3 mx-5 mt-4 mb-5\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:e=>searchForName(e.target.value),className:\"form-control\",type:\"text\",placeholder:\"search by customer name\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>searchForAmount(e.target.value),className:\"form-control\",type:\"number\",placeholder:\"search by transaction amount\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered border-dark text-center table-striped-columns\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" Customer ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\" Customer Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\" Transaction Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\" Transaction Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(filterByAmount.length&&filteredCustomers.length)!==0?/*#__PURE__*/_jsx(_Fragment,{children:filteredCustomers.map(customer=>filterByAmount.filter(transaction=>transaction.customer_id===parseInt(customer.id)).map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>handleCustomerClick(customer),role:\"button\",children:[/*#__PURE__*/_jsx(\"td\",{children:customer.id}),/*#__PURE__*/_jsx(\"td\",{children:customer.name}),/*#__PURE__*/_jsx(\"td\",{children:transaction.date}),/*#__PURE__*/_jsx(\"td\",{children:transaction.amount})]},transaction.id)))}):/*#__PURE__*/_jsx(_Fragment,{children:beforeDataComming?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{colSpan:4,className:\"text-danger\",children:\" No Matches\"})}):''})})]}),selectedCustomer?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-center my-4 text-secondary\",children:[\"Transactions for \",selectedCustomer.name]}),/*#__PURE__*/_jsx(\"div\",{ref:chartComponentRef,children:/*#__PURE__*/_jsx(TransactionChart,{transactions:filterByAmount.filter(transaction=>transaction.customer_id===parseInt(selectedCustomer.id))})})]}):'']})})});}","map":{"version":3,"names":["axios","useEffect","useRef","useState","TransactionChart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","chartComponentRef","showChart","setShowChart","customers","setCustomers","transactions","setTransactions","filteredCustomers","setFilteredCustomers","filterByAmount","setFilterByAmount","selectedCustomer","setSelectedCustomer","beforeDataComming","setBeforeDataComming","getCustomers","data","get","catch","error","console","log","getTransactions","searchForName","value","filter","customer","name","toLowerCase","includes","length","searchForAmount","transaction","amount","toString","handleCustomerClick","current","scrollIntoView","behavior","children","className","onChange","e","target","type","placeholder","map","customer_id","parseInt","id","onClick","role","date","colSpan","ref"],"sources":["C:/Users/CompuMarts/Downloads/Compressed/RouteTask-master/src/Components/Home/Home.jsx"],"sourcesContent":["import axios from 'axios'\nimport { useEffect, useRef, useState } from 'react'\nimport TransactionChart from '../TransactionChart/TransactionChart'\n\nexport default function Home() {\n    const chartComponentRef = useRef(null);\n    const [showChart, setShowChart] = useState(false);\n    const [customers, setCustomers] = useState([])\n    const [transactions, setTransactions] = useState([])\n    const [filteredCustomers, setFilteredCustomers] = useState([])\n    const [filterByAmount, setFilterByAmount] = useState([])\n    const [selectedCustomer, setSelectedCustomer] = useState(null);\n    const [beforeDataComming, setBeforeDataComming] = useState(false);\n    // Function to get all customers\n    async function getCustomers() {\n        let { data } = await axios.get('https://6693fde9c6be000fa07dd61e.mockapi.io/api/v1/customers')\n            .catch(error => console.log('Error fetching Customers data:', error));\n        setCustomers(data)\n        setFilteredCustomers(data)\n        setBeforeDataComming(true)\n    }\n    //to get all customers transactions\n    async function getTransactions() {\n        let { data } = await axios.get('https://6693fde9c6be000fa07dd61e.mockapi.io/api/v1/transactions')\n            .catch(error => console.log('Error fetching Transactions data:', error));\n        setTransactions(data)\n        setFilterByAmount(data)\n        setBeforeDataComming(true)\n    }\n    function searchForName(value) {\n        setFilteredCustomers(customers.filter(customer => customer.name.toLowerCase().includes(value.toLowerCase())))\n        if (!value) {\n            setFilteredCustomers(customers)\n        }\n        if (customers.filter(customer => customer.name.toLowerCase().includes(value.toLowerCase())).length === 0) {\n            setFilteredCustomers([])\n        }\n    }\n    function searchForAmount(value) {\n        setFilterByAmount(transactions.filter(transaction => transaction.amount.toString().includes(value)));\n        if (!value) {\n            setFilterByAmount(transactions)\n        }\n        if (transactions.filter(transaction => transaction.amount.toString().includes(value)).length === 0) {\n            setFilterByAmount([])\n        }\n    }\n    //to get amount's chart component\n    function handleCustomerClick(customer) {\n        setSelectedCustomer(customer)\n        setShowChart(true);\n    }\n    useEffect(() => {\n        getCustomers()\n        getTransactions()\n    }, [])\n    useEffect(() => {\n        //to handle scrolling top to the chart component\n        if (showChart && chartComponentRef.current) {\n            chartComponentRef.current.scrollIntoView({ behavior: 'smooth' });\n            setShowChart(false);\n        }\n    }, [showChart]);\n    return <>\n        <div className='mainComponent'>\n            <div className='container'>\n                <h1 className='text-center text-secondary'>Customers Transactions</h1>\n                <div className='d-flex align-items-center justify-content-center gap-3 mx-5 mt-4 mb-5'>\n                    <input onChange={(e) => searchForName(e.target.value)} className='form-control' type='text' placeholder='search by customer name' />\n                    <input onChange={(e) => searchForAmount(e.target.value)} className='form-control' type='number' placeholder='search by transaction amount' />\n                </div>\n                <table className='table table-bordered border-dark text-center table-striped-columns'>\n                    <thead>\n                        <tr>\n                            <th> Customer ID</th>\n                            <th> Customer Name</th>\n                            <th> Transaction Date</th>\n                            <th> Transaction Amount</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {(filterByAmount.length && filteredCustomers.length) !== 0 ? <>{filteredCustomers.map(customer => filterByAmount.filter(transaction => transaction.customer_id === parseInt(customer.id)).map(transaction => <tr key={transaction.id} onClick={() => handleCustomerClick(customer)} role='button'>\n                            <td>{customer.id}</td>\n                            <td>{customer.name}</td>\n                            <td>{transaction.date}</td>\n                            <td>{transaction.amount}</td>\n                        </tr>))}</> : <>\n                            {beforeDataComming ? <tr>\n                                <th colSpan={4} className='text-danger'> No Matches</th>\n                            </tr> : ''}\n                        </>\n                        }\n                    </tbody>\n                </table>\n                {selectedCustomer ? <>\n                    <h3 className='text-center my-4 text-secondary'>Transactions for {selectedCustomer.name}</h3>\n                    <div ref={chartComponentRef}>\n                        <TransactionChart transactions={filterByAmount.filter(transaction => transaction.customer_id === parseInt(selectedCustomer.id))} />\n                    </div>\n                </>\n                    : ''\n                }\n            </div>\n        </div>\n    </>\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}